# Asana Data Extractor

Python-скрипт для извлечения данных из Asana API с использованием Personal Access Token.

## Возможности

- Получение списка пользователей workspace (администраторы и внешние пользователи)
- Получение списка проектов с полями `archived` и `modified_at`
- Объединение всех данных в один JSON файл
- Детальная статистика извлеченных данных
- **Проверки безопасности:**
  - Проверка количества администраторов (не более 4)
  - Проверка неактивных проектов (не изменялись более 365 дней)
  - Проверка активных внешних пользователей
- Генерация отчета по безопасности

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `token.txt` и поместите в него ваш Personal Access Token от Asana
   - ⚠️ **Важно**: Файл `token.txt` уже добавлен в `.gitignore` для безопасности

## Использование

Запустите скрипт:
```bash
python asana_data_extractor.py
```

Скрипт автоматически:
1. Прочитает токен из файла `token.txt`
2. Получит список workspace
3. Извлечет пользователей и проекты из первого workspace
4. Сохранит все данные в файл `asana_data.json`
5. Выполнит проверки безопасности
6. Создаст отчет по безопасности
7. Сохранит данные с результатами проверок в `asana_data_with_security.json`

## Структура выходного JSON

```json
{
  "workspace": {
    "gid": "workspace_id",
    "name": "Workspace Name"
  },
  "users": {
    "admins": [...],
    "external_users": [...]
  },
  "projects": [...],
  "extracted_at": "2024-01-01T12:00:00",
  "total_admins": 5,
  "total_external_users": 10,
  "total_projects": 15,
  "security_audit": {
    "total_checks": 3,
    "violations": 1,
    "passed": 2,
    "overall_status": "VIOLATIONS FOUND",
    "checks": {
      "admin_count": { "status": "PASS", "admin_count": 2 },
      "inactive_projects": { "status": "VIOLATION", "inactive_projects_count": 3 },
      "active_external_users": { "status": "PASS", "external_users_count": 0 }
    }
  }
}
```

## Получение Personal Access Token

1. Войдите в Asana
2. Перейдите в настройки профиля
3. Выберите "Apps" → "Personal Access Tokens"
4. Создайте новый токен
5. Скопируйте токен в файл `token.txt`

## Проверки безопасности

Скрипт выполняет три основные проверки безопасности:

### 1. Проверка количества администраторов
- **Цель**: Не более 4 администраторов в workspace
- **Статус**: ✅ PASS / ❌ VIOLATION
- **Детали**: Показывает текущее количество администраторов

### 2. Проверка неактивных проектов
- **Цель**: Отсутствие проектов, не изменявшихся более 365 дней
- **Статус**: ✅ PASS / ❌ VIOLATION
- **Детали**: Список неактивных проектов с количеством дней без изменений

### 3. Проверка внешних пользователей
- **Цель**: Отсутствие активных внешних (гостевых) пользователей
- **Статус**: ✅ PASS / ❌ VIOLATION
- **Детали**: Список всех внешних пользователей с доступом к данным

## Требования

- Python 3.6+
- Personal Access Token от Asana
- Доступ к интернету для API запросов
